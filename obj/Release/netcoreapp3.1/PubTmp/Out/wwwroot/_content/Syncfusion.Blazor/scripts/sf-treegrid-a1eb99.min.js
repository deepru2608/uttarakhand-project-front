(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{"./bundles/sf-treegrid.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-treegrid.js")},"./modules/sf-treegrid.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeGrid=function(){"use strict";var e=function(){function e(e){this.treeCopyContent="",this.copiedUniqueIdCollection=[],this.parent=e,this.gridClipboard=this.parent.grid.clipboardModule,this.clipBoardTextArea=sf.base.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard","aria-hidden":"true"}}),this.parent.element.appendChild(this.clipBoardTextArea)}return e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.gridClipboard.isSelect&&(window.getSelection().removeAllRanges(),this.gridClipboard.isSelect=!1)},e.prototype.setCopyData=function(e){var t=this.parent.options.currentViewData;if(""===window.getSelection().toString()){this.clipBoardTextArea.value=this.gridClipboard.copyContent="";var i=this.parent.grid.getRows();if("Cell"!==this.parent.grid.selectionMode){for(var o=this.parent.grid.getSelectedRowIndexes().sort((function(e,t){return e-t})),n=0;n<o.length;n++)if(n>0&&(this.treeCopyContent+="\n"),!i[o[n]].classList.contains("e-summaryrow")){var r=[].slice.call(i[o[n]].querySelectorAll(".e-rowcell")),s=this.parent.options.currentViewData[o[n]].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(s)&&("Parent"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.parentContentData(t,o[n],i,e,n),this.gridClipboard.getCopyData(r,!1,"\t",e),this.treeCopyContent+=this.gridClipboard.copyContent,this.copiedUniqueIdCollection.push(s),this.gridClipboard.copyContent="","Child"!==this.parent.options.copyHierarchyMode&&"Both"!==this.parent.options.copyHierarchyMode||this.childContentData(t,o[n],i,e))}if(e){var a=[];for(n=0;n<this.parent.grid.getVisibleColumns().length;n++)a[n]=this.parent.grid.getVisibleColumns()[n].headerText;this.gridClipboard.getCopyData(a,!1,"\t",e),this.treeCopyContent=this.gridClipboard.copyContent+"\n"+this.treeCopyContent}this.clipBoardTextArea.value=this.gridClipboard.copyContent=this.treeCopyContent,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):(window.getSelection().removeAllRanges(),this.clipBoardTextArea.select()),this.gridClipboard.isSelect=!0,this.copiedUniqueIdCollection=[],this.treeCopyContent=""}}},e.prototype.parentContentData=function(e,t,i,o,n){var r=e.filter((function(i){return i.uniqueID===e[t].parentUniqueID}))[0];if(!sf.base.isNullOrUndefined(r))for(var s=r.level,a=0;a<s+1;a++)for(var c=0;c<e.length;c++)if(e[c].uniqueID===r.uniqueID){t=c;var l=[].slice.call(i[t].querySelectorAll(".e-rowcell")),d=e[c].uniqueID;if(-1===this.copiedUniqueIdCollection.indexOf(d)){this.gridClipboard.getCopyData(l,!1,"\t",o),this.treeCopyContent=n>0?this.treeCopyContent+this.gridClipboard.copyContent+"\n":this.gridClipboard.copyContent+"\n"+this.treeCopyContent,this.copiedUniqueIdCollection.push(d),this.gridClipboard.copyContent="";break}}},e.prototype.childContentData=function(e,t,i,o){if(e[t].hasChildRecords)for(var n=e[t].uniqueID,r=e.filter((function(e){return e.parentUniqueID===n})),s=0;s<r.length;s++)for(var a=0;a<e.length;a++)if(!sf.base.isNullOrUndefined(r[s].uniqueID)&&e[a].uniqueID===r[s].uniqueID){if(!sf.base.isNullOrUndefined(i[a])&&!i[a].classList.contains("e-summaryrow")){var c=[].slice.call(i[a].querySelectorAll(".e-rowcell")),l=e[a].uniqueID;-1===this.copiedUniqueIdCollection.indexOf(l)&&(this.gridClipboard.getCopyData(c,!1,"\t",o),this.treeCopyContent+="\n"+this.gridClipboard.copyContent,this.gridClipboard.copyContent="",this.copiedUniqueIdCollection.push(l),this.childContentData(e,a,i,o))}break}},e}(),t=function(){function e(e,t){this.parent=t,this.dotNetRef=e}return e.prototype.renderHeaderCheckbox=function(e,t){var i=sf.base.createElement("div",{className:"e-checkbox-wrapper e-css e-hierarchycheckbox"}),o=sf.base.createElement("input",{className:"e-treeselectall",attrs:{type:"checkbox"}});i.appendChild(o);var n=sf.base.createElement("span",{className:"e-frame e-icons",styles:"width: 18px;"});i.appendChild(n),n.addEventListener("click",this.headerSelect.bind(this));var r=sf.base.createElement("span",{className:"e-lable"});i.appendChild(r);var s=e.querySelectorAll(".e-headercontent th")[t];if(sf.base.isNullOrUndefined(s.querySelector(".e-checkbox-wrapper"))){var a=s.querySelector(".e-headercelldiv");a.insertBefore(i,a)}},e.prototype.updateHeaderCheckbox=function(e,t){"intermediate"===t?(e.classList.add("e-stop"),e.classList.remove("e-check")):"check"===t?(e.classList.add("e-check"),e.classList.remove("e-stop")):(e.classList.remove("e-stop"),e.classList.remove("e-check"))},e.prototype.headerSelect=function(e){var t=e.currentTarget,i="uncheck";t.classList.contains("e-check")?t.classList.remove("e-check"):t.classList.contains("e-stop")?t.classList.remove("e-stop"):(t.classList.add("e-check"),i="check"),this.dotNetRef.invokeMethodAsync("SelectAllCheckbox",i)},e}(),i=function(){function i(i,o,n){this.columnModel=[],this.element=i,this.element.blazor_instance=this,this.grid=i.querySelector("#"+i.id+"_gridcontrol").blazor__instance,this.dotNetRef=n,this.options=o,this.header=this.element.querySelector(".e-headercontent"),this.content=this.element.querySelector(".e-content"),this.footer=this.element.querySelector(".e-summarycontent"),this.clipboardModule=new e(this),this.checkboxcolumnModule=new t(n,this),this.wireEvents()}return i.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"keydown",this.KeyDownHandler,this)},i.prototype.getContent=function(){return this.content},i.prototype.getContentTable=function(){return this.content.querySelector(".e-table")},i.prototype.getHeaderContent=function(){return this.header},i.prototype.getHeaderTable=function(){return this.header.querySelector(".e-table")},i.prototype.getRows=function(){return[].slice.call(this.getContent().querySelectorAll(".e-row"))},i.prototype.KeyDownHandler=function(e){67===e.keyCode&&e.ctrlKey?this.clipboardModule.copy():72===e.keyCode&&e.ctrlKey&&e.shiftKey&&this.clipboardModule.copy(!0)},i.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"keydown",this.KeyDownHandler)},i.prototype.destroy=function(){this.unWireEvents()},i}();return{initialize:function(e,t,o){sf.base.enableBlazorMode(),new i(e,t,o)},modelChanged:function(e,t,i){e.blazor_instance.options=t;JSON.parse(i)},headerCheckbox:function(e,t,i,o){sf.base.isNullOrUndefined(e)||e.blazor_instance.checkboxcolumnModule.renderHeaderCheckbox(e,t)},updateCheckbox:function(e,t,i){var o=e.querySelectorAll(".e-gridheader th")[t].querySelector("span.e-frame");e.blazor_instance.checkboxcolumnModule.updateHeaderCheckbox(o,i)},copyToClipBoard:function(e,t){"Cell"===e.blazor_instance.grid.options.selectionMode?e.blazor_instance.grid.clipboardModule.copy(t):e.blazor_instance.clipboardModule.copy(t)},destroy:function(e){e.blazor_instance.destroy()}}}()}}]);